<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Professional AI Voice</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #0f0f1a; color: white; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .card { background: #1e1e2f; padding: 2rem; border-radius: 15px; width: 90%; max-width: 450px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); border: 1px solid #333; }
        h2 { text-align: center; color: #a29bfe; margin-bottom: 20px; }
        
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-size: 0.9rem; color: #ccc; }
        
        textarea, select, input { width: 100%; padding: 12px; background: #2b2b40; border: 1px solid #444; color: white; border-radius: 8px; box-sizing: border-box; font-size: 1rem; }
        textarea:focus, select:focus { outline: 2px solid #a29bfe; }
        
        button { width: 100%; padding: 15px; background: linear-gradient(45deg, #6c5ce7, #a29bfe); color: white; border: none; border-radius: 8px; font-size: 1.1rem; font-weight: bold; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        button:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(108, 92, 231, 0.4); }
        button:disabled { background: #555; cursor: not-allowed; transform: none; }
        
        audio { width: 100%; margin-top: 20px; display: none; }
        .status { text-align: center; margin-top: 10px; font-size: 0.9rem; color: #ff7675; min-height: 20px;}
        
        /* Loading Spinner */
        .spinner { border: 4px solid #f3f3f3; border-top: 4px solid #a29bfe; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin: 15px auto; display: none; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

<div class="card">
    <h2>üá≤üá≤ Myanmar AI Voice</h2>
    
    <div class="form-group">
        <label>·ÄÖ·Ä¨·Äû·Ä¨·Ä∏·Äõ·Ä≠·ÄØ·ÄÄ·Ä∫·Äë·Ää·Ä∑·Ä∫·Äï·Ä´:</label>
        <textarea id="text" rows="3" placeholder="·Äô·ÄÑ·Ä∫·Äπ·ÄÇ·Äú·Ä¨·Äï·Ä´ ·ÄÅ·ÄÑ·Ä∫·Äó·Äª·Ä¨..."></textarea>
    </div>

    <div class="form-group">
        <label>Step 1: ·Äñ·Äê·Ä∫·Äï·Äº·Äô·Ää·Ä∑·Ä∫·Äû·Ä∞ (TTS)</label>
        <select id="tts_voice">
            <option value="Thiha (Male)">Thiha (·ÄÄ·Ä≠·ÄØ·Äû·ÄÆ·Äü - ·ÄÄ·Äª·Ä¨·Ä∏)</option>
            <option value="Nilar (Female)">Nilar (·Äô·Äî·ÄÆ·Äú·Ä¨ - ·Äô)</option>
        </select>
    </div>

    <div class="form-group">
        <label>Step 2: ·Äï·Äº·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äú·Ä≤·Äô·Ää·Ä∑·Ä∫·Ä°·Äû·Ä∂ (RVC Model)</label>
        <select id="rvc_model">
            <option value="Black Panther">Black Panther</option>
            <option value="Tom Holland">Tom Holland</option>
            <option value="LiSA">LiSA</option>
            <option value="Ado">Ado </option>
            <option value="Mae Asmr">Mae Asmr</option>
            <option value="Kurt Cobain">Kurt Cobain</option>
            <option value="Bratishkinoff">Bratishkinoff</option>
            <option value="Ivanzolo">Ivanzolo</option>
            <option value="Itashi">Itashi</option>
        </select>
    </div>
    
    <div class="form-group">
        <label>Pitch (·Ä°·Äû·Ä∂ ·Ä°·Äî·Ä≠·Äô·Ä∑·Ä∫·Ä°·Äô·Äº·ÄÑ·Ä∑·Ä∫): <span id="pitchVal">0</span></label>
        <input type="range" id="pitch" min="-12" max="12" value="0" oninput="document.getElementById('pitchVal').innerText = this.value">
    </div>

    <button id="btn" onclick="generate()">Generate Voice</button>
    <div class="status" id="status"></div>
    <div class="spinner" id="loader"></div>
    <audio id="player" controls></audio>
</div>

<script>
    async function generate() {
        const text = document.getElementById('text').value;
        const tts = document.getElementById('tts_voice').value;
        const model = document.getElementById('rvc_model').value;
        const pitch = document.getElementById('pitch').value;
        
        const btn = document.getElementById('btn');
        const status = document.getElementById('status');
        const loader = document.getElementById('loader');
        const player = document.getElementById('player');

        if(!text) return status.innerText = "·ÄÖ·Ä¨·Äû·Ä¨·Ä∏ ·Äõ·Ä≠·ÄØ·ÄÄ·Ä∫·Äë·Ää·Ä∑·Ä∫·Äï·Ä±·Ä∏·Äï·Ä´!";

        // Loading ·Äï·Äº·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏
        btn.disabled = true;
        btn.innerText = "Processing...";
        loader.style.display = "block";
        status.innerText = "";
        player.style.display = "none";

        const formData = new FormData();
        formData.append("text", text);
        formData.append("tts_voice", tts);
        formData.append("rvc_model", model);
        formData.append("pitch", pitch);

        try {
            const response = await fetch("/generate", { method: "POST", body: formData });
            
            if (response.ok) {
                const blob = await response.blob();
                const url = URL.createObjectURL(blob);
                player.src = url;
                player.style.display = "block";
                player.play();
                status.innerText = "Success!";
            } else {
                const errText = await response.text();
                status.innerText = "Error: " + errText;
            }
        } catch (e) {
            status.innerText = "Connection Error!";
        } finally {
            btn.disabled = false;
            btn.innerText = "Generate Voice";
            loader.style.display = "none";
        }
    }
</script>

</body>
</html>
